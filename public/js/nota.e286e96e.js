"use strict";(self["webpackChunknotasfrt"]=self["webpackChunknotasfrt"]||[]).push([[651],{6095:function(t,a,e){e.r(a),e.d(a,{default:function(){return d}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"container"},[a("h1",[t._v("Ruta privada!")]),a("table",{staticClass:"table"},[t._m(0),a("tbody",t._l(t.notas,(function(e,s){return a("tr",{key:s},[a("th",{attrs:{scope:"row"}},[t._v(t._s(e._id))]),a("td",[t._v(t._s(e.nombre))]),a("td",[t._v(t._s(e.descripcion))]),a("td",[t._v(t._s(e.date))]),a("td",[a("b-button",{staticClass:"btn-warning btn-sm mx-2",on:{click:function(a){return t.activarEdicion(e._id)}}},[t._v("Actualizar")]),a("b-button",{staticClass:"btn-danger btn-sm mx-2",on:{click:function(a){return t.eliminarNota(e._id)}}},[t._v("Eliminar")])],1)])})),0)]),a("nav",{attrs:{"aria-label":"Page navigation example"}},[a("ul",{staticClass:"pagination"},[a("li",{staticClass:"page-item",class:{disabled:1===t.paginaActual}},[a("router-link",{staticClass:"page-link",attrs:{to:{query:{pagina:t.paginaActual-1}}}},[t._v("Anterior")])],1),t._l(t.cantidadPaginas,(function(e,s){return a("li",{key:s,staticClass:"page-item",class:{active:t.paginaActual===s+1}},[a("router-link",{staticClass:"page-link",attrs:{to:{query:{pagina:s+1}}}},[t._v(t._s(s+1))])],1)})),a("li",{staticClass:"page-item",class:{disabled:t.paginaActual===t.cantidadPaginas}},[a("router-link",{staticClass:"page-link",attrs:{to:{query:{pagina:t.paginaActual+1}}}},[t._v("Siguiente")])],1)],2)]),a("p",[t._v("Total notas: "+t._s(t.totalNotas)+" - Cantidad de páginas: "+t._s(t.cantidadPaginas))]),t.agregar?a("form",{on:{submit:function(a){return a.preventDefault(),t.agregarNota(t.nota)}}},[a("h3",{staticClass:"text-center"},[t._v("Agregar nueva Nota")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nota.nombre,expression:"nota.nombre"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Ingrese un Nombre"},domProps:{value:t.nota.nombre},on:{input:function(a){a.target.composing||t.$set(t.nota,"nombre",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nota.descripcion,expression:"nota.descripcion"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Ingrese una descripcion"},domProps:{value:t.nota.descripcion},on:{input:function(a){a.target.composing||t.$set(t.nota,"descripcion",a.target.value)}}}),a("b-button",{staticClass:"btn-sm btn-block btn-success",attrs:{type:"submit"}},[t._v("Agregar")])],1):a("form",{on:{submit:function(a){return a.preventDefault(),t.editarNota(t.notaEditar)}}},[a("h3",{staticClass:"text-center"},[t._v("Editar Nota")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.notaEditar.nombre,expression:"notaEditar.nombre"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Ingrese un Nombre"},domProps:{value:t.notaEditar.nombre},on:{input:function(a){a.target.composing||t.$set(t.notaEditar,"nombre",a.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.notaEditar.descripcion,expression:"notaEditar.descripcion"}],staticClass:"form-control my-2",attrs:{type:"text",placeholder:"Ingrese una descripcion"},domProps:{value:t.notaEditar.descripcion},on:{input:function(a){a.target.composing||t.$set(t.notaEditar,"descripcion",a.target.value)}}}),a("b-button",{staticClass:"btn-sm btn-block mb-1 btn-warning",attrs:{type:"submit"}},[t._v("Editar")]),a("b-button",{staticClass:"btn-sm btn-block",on:{click:function(a){t.agregar=!0}}},[t._v("Cancelar")])],1),a("b-alert",{attrs:{show:t.dismissCountDown,dismissible:"",variant:t.mensaje.color},on:{dismissed:function(a){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" "+t._s(t.mensaje.texto)+" ")])],1)},n=[function(){var t=this,a=t._self._c;return a("thead",[a("tr",[a("th",{attrs:{scope:"col"}},[t._v("#")]),a("th",{attrs:{scope:"col"}},[t._v("Nombre")]),a("th",{attrs:{scope:"col"}},[t._v("Descripción")]),a("th",{attrs:{scope:"col"}},[t._v("Fecha")]),a("th",{attrs:{scope:"col"}},[t._v("Acciones")])])])}],o=e(3518),i={data(){return{totalNotas:0,limite:5,paginaActual:1,notas:[],agregar:!0,nota:{},notaEditar:{},mensaje:{color:"success",texto:""},dismissSecs:5,dismissCountDown:0}},computed:{...(0,o.aH)(["token"]),cantidadPaginas(){return Math.ceil(this.totalNotas/this.limite)}},methods:{...(0,o.i0)(["getTareas"]),countDownChanged(t){this.dismissCountDown=t},showAlert(){this.dismissCountDown=this.dismissSecs},paginacion(t){let a={headers:{token:this.token}},e=(t-1)*this.limite;this.axios.get(`/nota?skip=${e}&limit=${this.limite}`,a).then((t=>{this.notas=t.data.notaDB,this.totalNotas=t.data.totalNotas})).catch((t=>{console.log(t.response)}))},agregarNota(){let t={headers:{token:this.token}};this.axios.post("/nueva-nota",this.nota,t).then((()=>{this.paginacion(this.paginaActual),this.nota.nombre="",this.nota.descripcion="",this.mensaje.color="success",this.mensaje.texto="Nota Agregada!",this.showAlert()})).catch((t=>{console.log(t.response),t.response?t.response.data&&t.response.data.error&&t.response.data.error.errors&&t.response.data.error.errors.nombre&&t.response.data.error.errors.nombre.message?this.mensaje.texto=t.response.data.error.errors.nombre.message:t.response.data&&t.response.data.mensaje?this.mensaje.texto=t.response.data.mensaje:this.mensaje.texto="Error de sistema":this.mensaje.texto="Error de red",this.mensaje.color="danger",this.showAlert()}))},activarEdicion(t){this.agregar=!1,this.axios.get(`nota/${t}`).then((t=>{this.notaEditar=t.data})).catch((t=>{console.log(t.response)}))},editarNota(t){this.axios.put(`nota/${t._id}`,t).then((()=>{this.paginacion(this.paginaActual),this.notaEditar={},this.showAlert(),this.mensaje.texto="Nota Actualizada",this.mensaje.color="success"})).catch((t=>{console.log(t)})),this.agregar=!0},eliminarNota(t){this.axios.delete(`nota/${t}`).then((()=>{this.paginacion(this.paginaActual),this.showAlert(),this.mensaje.texto="Nota Eliminada!",this.mensaje.color="danger"})).catch((t=>{console.log(t.response)}))}},watch:{"$route.query.pagina":{immediate:!0,handler(t){t=parseInt(t)||1,this.paginacion(t),this.paginaActual=t}}},created(){this.getTareas(),this.paginacion(this.paginaActual)}},r=i,c=e(1656),l=(0,c.A)(r,s,n,!1,null,null,null),d=l.exports}}]);
//# sourceMappingURL=nota.e286e96e.js.map